{"ast":null,"code":"import facade from './loginFacade';\nimport { baseURL } from \"./settings\";\n\nfunction handleHttpErrors(res) {\n  if (!res.ok) {\n    return Promise.reject({\n      status: res.status,\n      fullError: res.json()\n    });\n  }\n\n  return res.json();\n}\n\nfunction flightFacade() {\n  const fetchData = url => {\n    const options = facade.makeOptions(\"GET\", true); //True add's the token\n\n    return fetch(baseURL + url, options).then(handleHttpErrors);\n  };\n\n  const getFlights = () => {\n    // MOCK\n    const data = [{\n      flightId: 1,\n      departure: \"09:32:49\",\n      arrival: \"16:19:02\",\n      destinationAirport: \"NY Airport\",\n      takeoffAirport: \"CPH Airport\",\n      price: 932\n    }, {\n      flightId: 2,\n      departure: \"19:57:00\",\n      arrival: \"02:10:42\",\n      destinationAirport: \"Alaska Airport\",\n      takeoffAirport: \"NY Airport\",\n      price: 324\n    }, {\n      flightId: 3,\n      departure: \"00:42:53\",\n      arrival: \"00:10:43\",\n      destinationAirport: \"CPH Airport\",\n      takeoffAirport: \"Sidney Airport\",\n      price: 3204\n    }]; // PROD\n    //const data = fetchData(\"/api/flight/all\");\n\n    return data;\n  };\n\n  const getFlightByDestinationId = id => {\n    const data = fetchData(\"/api/flight/destination/\" + id);\n    return data;\n  };\n\n  return {\n    getFlights,\n    getFlightByDestinationId\n  };\n}\n\nconst flight = flightFacade();\nexport default flight;","map":{"version":3,"sources":["/Users/cecilie/NetBeansProjects/SYSEksamen_3sem_Frontend/src/flightFacade.js"],"names":["facade","baseURL","handleHttpErrors","res","ok","Promise","reject","status","fullError","json","flightFacade","fetchData","url","options","makeOptions","fetch","then","getFlights","data","flightId","departure","arrival","destinationAirport","takeoffAirport","price","getFlightByDestinationId","id","flight"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,eAAnB;AACA,SAAQC,OAAR,QAAsB,YAAtB;;AAEA,SAASC,gBAAT,CAA0BC,GAA1B,EAA+B;AAC7B,MAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACX,WAAOC,OAAO,CAACC,MAAR,CAAe;AAAEC,MAAAA,MAAM,EAAEJ,GAAG,CAACI,MAAd;AAAsBC,MAAAA,SAAS,EAAEL,GAAG,CAACM,IAAJ;AAAjC,KAAf,CAAP;AACD;;AACD,SAAON,GAAG,CAACM,IAAJ,EAAP;AACD;;AAED,SAASC,YAAT,GAAwB;AACtB,QAAMC,SAAS,GAAIC,GAAD,IAAS;AACzB,UAAMC,OAAO,GAAGb,MAAM,CAACc,WAAP,CAAmB,KAAnB,EAA0B,IAA1B,CAAhB,CADyB,CACwB;;AACjD,WAAOC,KAAK,CAACd,OAAO,GAAGW,GAAX,EAAgBC,OAAhB,CAAL,CAA8BG,IAA9B,CAAmCd,gBAAnC,CAAP;AACD,GAHD;;AAIA,QAAMe,UAAU,GAAG,MAAM;AACvB;AACA,UAAMC,IAAI,GAAG,CACX;AACEC,MAAAA,QAAQ,EAAE,CADZ;AAEEC,MAAAA,SAAS,EAAE,UAFb;AAGEC,MAAAA,OAAO,EAAE,UAHX;AAIEC,MAAAA,kBAAkB,EAAE,YAJtB;AAKEC,MAAAA,cAAc,EAAE,aALlB;AAMEC,MAAAA,KAAK,EAAE;AANT,KADW,EASX;AACEL,MAAAA,QAAQ,EAAE,CADZ;AAEEC,MAAAA,SAAS,EAAE,UAFb;AAGEC,MAAAA,OAAO,EAAE,UAHX;AAIEC,MAAAA,kBAAkB,EAAE,gBAJtB;AAKEC,MAAAA,cAAc,EAAE,YALlB;AAMEC,MAAAA,KAAK,EAAE;AANT,KATW,EAiBX;AACEL,MAAAA,QAAQ,EAAE,CADZ;AAEEC,MAAAA,SAAS,EAAE,UAFb;AAGEC,MAAAA,OAAO,EAAE,UAHX;AAIEC,MAAAA,kBAAkB,EAAE,aAJtB;AAKEC,MAAAA,cAAc,EAAE,gBALlB;AAMEC,MAAAA,KAAK,EAAE;AANT,KAjBW,CAAb,CAFuB,CA4BvB;AACA;;AACA,WAAON,IAAP;AACD,GA/BD;;AAiCA,QAAMO,wBAAwB,GAAIC,EAAD,IAAQ;AACvC,UAAMR,IAAI,GAAGP,SAAS,CAAC,6BAA6Be,EAA9B,CAAtB;AACA,WAAOR,IAAP;AACD,GAHD;;AAKA,SAAO;AACLD,IAAAA,UADK;AAELQ,IAAAA;AAFK,GAAP;AAKD;;AAED,MAAME,MAAM,GAAGjB,YAAY,EAA3B;AACA,eAAeiB,MAAf","sourcesContent":["import facade from './loginFacade';\nimport {baseURL} from \"./settings\"\n\nfunction handleHttpErrors(res) {\n  if (!res.ok) {\n    return Promise.reject({ status: res.status, fullError: res.json() })\n  }\n  return res.json();\n}\n\nfunction flightFacade() {\n  const fetchData = (url) => {\n    const options = facade.makeOptions(\"GET\", true); //True add's the token\n    return fetch(baseURL + url, options).then(handleHttpErrors);\n  }\n  const getFlights = () => {\n    // MOCK\n    const data = [\n      {\n        flightId: 1,\n        departure: \"09:32:49\",\n        arrival: \"16:19:02\",\n        destinationAirport: \"NY Airport\",\n        takeoffAirport: \"CPH Airport\",\n        price: 932\n      },\n      {\n        flightId: 2,\n        departure: \"19:57:00\",\n        arrival: \"02:10:42\",\n        destinationAirport: \"Alaska Airport\",\n        takeoffAirport: \"NY Airport\",\n        price: 324\n      },\n      {\n        flightId: 3,\n        departure: \"00:42:53\",\n        arrival: \"00:10:43\",\n        destinationAirport: \"CPH Airport\",\n        takeoffAirport: \"Sidney Airport\",\n        price: 3204\n      }\n    ]\n    // PROD\n    //const data = fetchData(\"/api/flight/all\");\n    return data;\n  }\n\n  const getFlightByDestinationId = (id) => {\n    const data = fetchData(\"/api/flight/destination/\" + id);\n    return data;\n  }\n  \n  return {\n    getFlights,\n    getFlightByDestinationId,\n  \n  }\n}\n\nconst flight = flightFacade();\nexport default flight;\n"]},"metadata":{},"sourceType":"module"}
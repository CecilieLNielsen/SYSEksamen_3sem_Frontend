{"ast":null,"code":"import facade from './loginFacade';\nconst base_url = \"http://localhost:8080/jpareststarter\";\n\nfunction handleHttpErrors(res) {\n  if (!res.ok) {\n    return Promise.reject({\n      status: res.status,\n      fullError: res.json()\n    });\n  }\n\n  return res.json();\n}\n\nfunction demoFacade() {\n  const fetchData = url => {\n    const options = facade.makeOptions(\"GET\", true); //True add's the token\n\n    return fetch(base_url + url, options).then(handleHttpErrors);\n  };\n\n  const getUser = () => {\n    const data = fetchData(\"/api/info/user\").then(res => res.json);\n    return data;\n  };\n\n  const getAdmin = () => {\n    const data = fetchData(\"/api/info/admin\");\n    return data.then(res => res.json);\n  };\n\n  const getData = () => {\n    const data = fetchData(\"/api/info/data\");\n    return data.then(res => res.json);\n  };\n\n  return {\n    getUser,\n    getAdmin,\n    getData\n  };\n}\n\nconst demo = demoFacade();\nexport default demo;","map":{"version":3,"sources":["/Users/cecilie/NetBeansProjects/CA_03/Eksamen_Startkode_Frontend/src/demoFacade.js"],"names":["facade","base_url","handleHttpErrors","res","ok","Promise","reject","status","fullError","json","demoFacade","fetchData","url","options","makeOptions","fetch","then","getUser","data","getAdmin","getData","demo"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,eAAnB;AAEA,MAAMC,QAAQ,GAAG,sCAAjB;;AAEA,SAASC,gBAAT,CAA0BC,GAA1B,EAA+B;AAC7B,MAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACX,WAAOC,OAAO,CAACC,MAAR,CAAe;AAAEC,MAAAA,MAAM,EAAEJ,GAAG,CAACI,MAAd;AAAsBC,MAAAA,SAAS,EAAEL,GAAG,CAACM,IAAJ;AAAjC,KAAf,CAAP;AACD;;AACD,SAAON,GAAG,CAACM,IAAJ,EAAP;AACD;;AAED,SAASC,UAAT,GAAsB;AACpB,QAAMC,SAAS,GAAIC,GAAD,IAAS;AACzB,UAAMC,OAAO,GAAGb,MAAM,CAACc,WAAP,CAAmB,KAAnB,EAA0B,IAA1B,CAAhB,CADyB,CACwB;;AACjD,WAAOC,KAAK,CAACd,QAAQ,GAAGW,GAAZ,EAAiBC,OAAjB,CAAL,CAA+BG,IAA/B,CAAoCd,gBAApC,CAAP;AACD,GAHD;;AAIA,QAAMe,OAAO,GAAG,MAAM;AACpB,UAAMC,IAAI,GAAGP,SAAS,CAAC,gBAAD,CAAT,CAA4BK,IAA5B,CAAiCb,GAAG,IAAIA,GAAG,CAACM,IAA5C,CAAb;AACA,WAAOS,IAAP;AACD,GAHD;;AAKA,QAAMC,QAAQ,GAAG,MAAM;AACrB,UAAMD,IAAI,GAAGP,SAAS,CAAC,iBAAD,CAAtB;AACA,WAAOO,IAAI,CAACF,IAAL,CAAUb,GAAG,IAAIA,GAAG,CAACM,IAArB,CAAP;AACD,GAHD;;AAIA,QAAMW,OAAO,GAAG,MAAM;AACpB,UAAMF,IAAI,GAAGP,SAAS,CAAC,gBAAD,CAAtB;AACA,WAAOO,IAAI,CAACF,IAAL,CAAUb,GAAG,IAAIA,GAAG,CAACM,IAArB,CAAP;AACD,GAHD;;AAIA,SAAO;AACLQ,IAAAA,OADK;AAELE,IAAAA,QAFK;AAGLC,IAAAA;AAHK,GAAP;AAKD;;AAED,MAAMC,IAAI,GAAGX,UAAU,EAAvB;AACA,eAAeW,IAAf","sourcesContent":["import facade from './loginFacade';\n\nconst base_url = \"http://localhost:8080/jpareststarter\";\n\nfunction handleHttpErrors(res) {\n  if (!res.ok) {\n    return Promise.reject({ status: res.status, fullError: res.json() })\n  }\n  return res.json();\n}\n\nfunction demoFacade() {\n  const fetchData = (url) => {\n    const options = facade.makeOptions(\"GET\", true); //True add's the token\n    return fetch(base_url + url, options).then(handleHttpErrors);\n  }\n  const getUser = () => {\n    const data = fetchData(\"/api/info/user\").then(res => res.json);\n    return data;\n  }\n\n  const getAdmin = () => {\n    const data = fetchData(\"/api/info/admin\");\n    return data.then(res => res.json);\n  }\n  const getData = () => {\n    const data = fetchData(\"/api/info/data\");\n    return data.then(res => res.json);\n  }\n  return {\n    getUser,\n    getAdmin,\n    getData\n  }\n}\n\nconst demo = demoFacade();\nexport default demo;\n"]},"metadata":{},"sourceType":"module"}